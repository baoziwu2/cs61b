# test_basic_commit.in
# 引入预定义的正则表达式，用于匹配动态内容（如 commit ID 和日期）
I definitions.inc

# 标题：测试基本的 init, add, commit, log 流程
# > 表示执行命令, <<< 表示预期输出的开始, <<<* 表示使用正则表达式匹配输出

# 1. 初始化仓库，预期没有输出
> init
<<<
# 验证 .gitlet 目录是否已创建
E .gitlet

# 2. 在工作目录中创建一个新文件 wug.txt
# + 表示从 testing/src 目录复制文件
+ wug.txt wug.txt

# 3. 添加文件到暂存区，预期没有输出
> add wug.txt
<<<

# 4. 提交文件，预期没有输出
> commit "initial commit of wug.txt"
<<<

# 5. 再次修改文件内容
+ wug.txt notwug.txt

# 6. 再次添加并提交
> add wug.txt
<<<
> commit "changed wug.txt to notwug"
<<<

# 7. 执行 log 命令，并验证输出格式
> log
===
${COMMIT_HEAD}
changed wug.txt to notwug

===
${COMMIT_HEAD}
initial commit of wug.txt

===
${COMMIT_HEAD}
initial commit

<<<*